<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Success - ×”×›× ×” ×œ××‘×—×Ÿ ğŸ†</title>
    <style>
        :root { --primary: #4a90e2; --secondary: #ff9f43; --success: #28c76f; --bg: #f8faff; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; align-items: center; }
        #game-container { max-width: 850px; width: 95%; background: white; margin: 20px; padding: 25px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 20px; margin-bottom: 25px; }
        .btn { background: var(--primary); color: white; border: none; padding: 14px 28px; font-size: 1.2rem; border-radius: 15px; cursor: pointer; margin: 8px; font-weight: bold; transition: 0.3s; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .word-card { font-size: 3rem; color: #333; margin: 15px; font-weight: 800; }
        input[type="text"] { font-size: 1.6rem; padding: 15px; border: 3px solid #eee; border-radius: 15px; width: 85%; text-align: center; direction: ltr; outline: none; }
        input[type="text"]:focus { border-color: var(--primary); }
        .sentence-builder { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin: 15px; min-height: 80px; padding: 15px; border-radius: 20px; background: #f0f7ff; }
        #sentence-slots { border: 2px dashed var(--primary); background: #fff; }
        .word-tile { background: white; border: 2px solid var(--primary); padding: 12px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; user-select: none; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .word-tile:hover { background: #eef6ff; }
        .progress-bar { width: 100%; height: 12px; background: #eee; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--success); width: 0%; transition: 0.4s; }
        .hidden { display: none; }
        .feedback { font-size: 1.5rem; font-weight: bold; margin: 15px; height: 35px; }
        .memory-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 20px auto; max-width: 600px; }
        .memory-card { aspect-ratio: 1; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1rem; padding: 5px; }
        .memory-card.flipped { background: white; color: var(--primary); border: 2px solid var(--primary); }
    </style>
</head>
<body>

<div id="game-container">
    <div class="header">
        <h1>×”×¤×¡×§×ª ××©×—×§ ×‘×× ×’×œ×™×ª! ğŸˆ</h1>
        <p>××ª××× ×™× ×‘×™×—×“ ×•×× ×¦×—×™× ××ª ×”××‘×—×Ÿ!</p>
    </div>

    <div id="start-screen">
        <h3>×‘×—×¨×• ××ª ×”××ª×’×¨ ×©×œ×›×:</h3>
        <button class="btn" onclick="initSpelling()">âœï¸ ×”×›×ª×‘×” (××™×•×ª)</button>
        <button class="btn" onclick="initGrammar()">ğŸ§ Is ××• Are?</button>
        <button class="btn" onclick="initSentence()">ğŸ—ï¸ ×‘×•× ×™× ××©×¤×˜×™×</button>
        <button class="btn" onclick="initMemory()">ğŸ§  ××©×—×§ ×”×–×™×›×¨×•×Ÿ</button>
    </div>

    <div id="spelling-game" class="hidden">
        <div class="progress-bar"><div id="spell-progress" class="progress-fill"></div></div>
        <p>××™×š ×›×•×ª×‘×™× ×‘×× ×’×œ×™×ª:</p>
        <div id="hebrew-word" class="word-card"></div>
        <button class="btn" style="background:var(--secondary)" onclick="speakCurrentWord()">ğŸ”Š ×©××¢</button><br><br>
        <input type="text" id="spell-input" placeholder="×”×§×œ×™×“×• ×›××Ÿ..." autocomplete="off">
        <div id="spell-feedback" class="feedback"></div>
        <button class="btn" onclick="checkSpelling()">×‘×“×™×§×”</button>
        <button class="btn" style="background:#999" onclick="goBack()">×ª×¤×¨×™×˜</button>
    </div>

    <div id="grammar-game" class="hidden">
        <p>××” ××ª××™× ×œ××™×œ×”?</p>
        <div class="word-card" id="gram-word"></div>
        <div style="display:flex; justify-content:center; gap:15px;">
            <button class="btn" style="padding:30px" onclick="checkGrammar('is')">There is</button>
            <button class="btn" style="padding:30px" onclick="checkGrammar('are')">There are</button>
        </div>
        <div id="gram-feedback" class="feedback"></div>
        <button class="btn" style="background:#999" onclick="goBack()">×—×–×¨×”</button>
    </div>

    <div id="sentence-game" class="hidden">
        <p>×¡×“×¨×• ××ª ×”××©×¤×˜ (×œ×—×™×¦×” ×œ×”×•×¡×¤×”, ×œ×—×™×¦×” ×—×•×–×¨×ª ×œ×”×¡×¨×”):</p>
        <div id="sentence-hint" style="font-size: 1.5rem; color: #444; font-weight: bold; margin-bottom:10px;"></div>
        <div id="sentence-slots" class="sentence-builder"></div>
        <div id="sentence-options" class="sentence-builder"></div>
        <div id="sent-feedback" class="feedback"></div>
        <button class="btn" onclick="checkSentence()">×‘×“×§×• ××•×ª×™ âœ…</button>
        <button class="btn" style="background:#999" onclick="goBack()">×—×–×¨×”</button>
    </div>

    <div id="memory-game" class="hidden">
        <p>××¦××• ××ª ×”×–×•×’×•×ª ×”××ª××™××™×:</p>
        <div id="memory-grid" class="memory-grid"></div>
        <button class="btn" style="background:#999" onclick="goBack()">×—×–×¨×”</button>
    </div>

    <div id="win-screen" class="hidden">
        <h2 style="color: var(--success); font-size: 3rem;">×›×œ ×”×›×‘×•×“! ××œ×•×¤×™×! ğŸ†</h2>
        <p>×¡×™×™××ª× ××ª ×”××ª×’×¨. ××ª× ××•×›× ×™× ×œ××‘×—×Ÿ!</p>
        <button class="btn" onclick="location.reload()">×©×—×§×• ×©×•×‘</button>
    </div>
</div>

<script>
    // ××•×¦×¨ ××™×œ×™× ××“×•×™×§ ××”×œ×•×—
    const baseVocabulary = [
        {en: 'dress', he: '×©××œ×”', type: 'is'}, {en: 'children', he: '×™×œ×“×™×', type: 'are'},
        {en: 'ice-cream', he: '×’×œ×™×“×”', type: 'is'}, {en: 'boots', he: '××’×¤×™×™×', type: 'are'},
        {en: 'pants', he: '××›× ×¡×™×™×', type: 'are'}, {en: 'shoes', he: '× ×¢×œ×™×™×', type: 'are'},
        {en: 'socks', he: '×’×¨×‘×™×™×', type: 'are'}, {en: 'shirt', he: '×—×•×œ×¦×”', type: 'is'},
        {en: 'store', he: '×—× ×•×ª', type: 'is'}, {en: 'they', he: '×”×/×”×Ÿ'},
        {en: 'Do you want?', he: '×”×× ××ª/×” ×¨×•×¦×”?'}, {en: 'I don\'t want', he: '×× ×™ ×œ× ×¨×•×¦×”'},
        {en: 'I want', he: '×× ×™ ×¨×•×¦×”'}, {en: 'cloud', he: '×¢× ×Ÿ', type: 'is'},
        {en: 'sky', he: '×©××™×™×', type: 'is'}, {en: 'wear', he: '×œ×œ×‘×•×©'}
    ];

    // ××©×¤×˜×™× ××“×•×™×§×™× ××”×œ×•×—
    const baseSentences = [
        {he: '×™×© ××¨×‘×¢×” ×™×œ×“×™×', en: ['There', 'are', 'four', 'children']},
        {he: '×™×© ××’×¤×™×™× ×‘×—× ×•×ª', en: ['There', 'are', 'boots', 'in', 'the', 'store']},
        {he: '×™×© ×—× ×•×ª ×¦×”×•×‘×”', en: ['There', 'is', 'a', 'yellow', 'store']},
        {he: '×™×© ×—× ×•×ª ×’×œ×™×“×”', en: ['There', 'is', 'an', 'ice', 'cream', 'store']},
        {he: '×™×© ×©××œ×” ×•×¨×•×“×” ×‘×—× ×•×ª', en: ['There', 'is', 'a', 'pinky', 'dress', 'in', 'the', 'store']},
        {he: '×™×© ××’×¤×™×™× ×©×—×•×¨×™× ×‘×—× ×•×ª', en: ['There', 'are', 'black', 'boots', 'in', 'the', 'store']},
        {he: '×™×© ×’×¨×‘×™×™× ×›×—×•×œ×™× ×‘×—× ×•×ª', en: ['There', 'are', 'blue', 'socks', 'in', 'the', 'store']},
        {he: '×™×© ×©××œ×” ×—×“×©×” ×‘×—× ×•×ª', en: ['There', 'is', 'a', 'new', 'dress', 'in', 'the', 'store']},
        {he: '×™×© ×™×œ×“×™× ×‘×—× ×•×ª', en: ['There', 'are', 'children', 'at', 'the', 'store']},
        {he: '×™×© ×—××™×©×” ×™×œ×“×™× ×‘×‘×¨×™×›×” (×œ×¤×™ ×”×œ×•×—)', en: ['There', 'is', 'five', 'children', 'in', 'the', 'pool']}
    ];

    let gameVocab = [], gameSentences = [], currentIdx = 0, builtSentence = [], poolWords = [];

    // ×× ×’× ×•×Ÿ ×”× ×™×§×•×™ ×”×—×“×© - ××ª×¢×œ× ××”×›×œ ×—×•×¥ ×××•×ª×™×•×ª ×•××¡×¤×¨×™×
    function clean(str) {
        return str.toLowerCase().replace(/[^a-z0-9]/g, "").trim();
    }

    function shuffle(array) {
        let arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    function showScreen(id) {
        document.querySelectorAll('#game-container > div:not(.header)').forEach(d => d.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }
    function goBack() { showScreen('start-screen'); }

    // --- Spelling ---
    function initSpelling() { gameVocab = shuffle(baseVocabulary); currentIdx = 0; showScreen('spelling-game'); nextSpell(); }
    function nextSpell() {
        if(currentIdx >= gameVocab.length) return showScreen('win-screen');
        document.getElementById('hebrew-word').innerText = gameVocab[currentIdx].he;
        document.getElementById('spell-input').value = '';
        document.getElementById('spell-feedback').innerText = '';
        document.getElementById('spell-progress').style.width = (currentIdx/gameVocab.length)*100 + '%';
        document.getElementById('spell-input').focus();
    }
    function checkSpelling() {
        const input = clean(document.getElementById('spell-input').value);
        const target = clean(gameVocab[currentIdx].en);
        if(input === target) {
            document.getElementById('spell-feedback').innerHTML = "ğŸŸ¢ ××¦×•×™×Ÿ! ×›×œ ×”×›×‘×•×“!";
            currentIdx++; setTimeout(nextSpell, 800);
        } else {
            document.getElementById('spell-feedback').innerHTML = "ğŸ”´ × ×¡×• ×©×•×‘, ×‘×“×§×• ××ª ×”××™×•×ª ×”××“×•×™×§.";
        }
    }
    function speakCurrentWord() {
        let msg = new SpeechSynthesisUtterance(gameVocab[currentIdx].en);
        msg.lang = 'en-US'; window.speechSynthesis.speak(msg);
    }

    // --- Grammar ---
    function initGrammar() { gameVocab = shuffle(baseVocabulary.filter(v => v.type)); currentIdx = 0; showScreen('grammar-game'); nextGram(); }
    function nextGram() {
        if(currentIdx >= gameVocab.length) return showScreen('win-screen');
        document.getElementById('gram-word').innerText = gameVocab[currentIdx].en;
        document.getElementById('gram-feedback').innerText = "";
    }
    function checkGrammar(choice) {
        if(choice === gameVocab[currentIdx].type) {
            document.getElementById('gram-feedback').innerText = "× ×›×•×Ÿ ×××•×“! âœ¨";
            currentIdx++; setTimeout(nextGram, 700);
        } else { document.getElementById('gram-feedback').innerText = "×©×™××• ×œ×‘ ×œ×›××•×ª (×™×—×™×“ ××• ×¨×‘×™×)..."; }
    }

    // --- Sentences ---
    function initSentence() { gameSentences = shuffle(baseSentences); currentIdx = 0; showScreen('sentence-game'); nextSent(); }
    function nextSent() {
        if(currentIdx >= gameSentences.length) return showScreen('win-screen');
        builtSentence = []; poolWords = shuffle(gameSentences[currentIdx].en);
        document.getElementById('sentence-hint').innerText = gameSentences[currentIdx].he;
        document.getElementById('sent-feedback').innerText = "";
        renderSentence();
    }
    function renderSentence() {
        const slots = document.getElementById('sentence-slots'), options = document.getElementById('sentence-options');
        slots.innerHTML = ''; options.innerHTML = '';
        builtSentence.forEach((w, i) => {
            let div = document.createElement('div'); div.className = 'word-tile'; div.innerText = w;
            div.onclick = () => { poolWords.push(builtSentence.splice(i, 1)[0]); renderSentence(); };
            slots.appendChild(div);
        });
        poolWords.forEach((w, i) => {
            let div = document.createElement('div'); div.className = 'word-tile'; div.innerText = w;
            div.onclick = () => { builtSentence.push(poolWords.splice(i, 1)[0]); renderSentence(); };
            options.appendChild(div);
        });
    }
    function checkSentence() {
        if(builtSentence.join(' ') === gameSentences[currentIdx].en.join(' ')) {
            document.getElementById('sent-feedback').innerText = "××©×¤×˜ ××¢×•×œ×”! â­";
            currentIdx++; setTimeout(nextSent, 1200);
        } else { document.getElementById('sent-feedback').innerText = "×œ× ×‘×“×™×•×§, × ×¡×• ×œ×©× ×•×ª ××ª ×”×¡×“×¨."; }
    }

    // --- Memory ---
    let mem1 = null;
    function initMemory() {
        showScreen('memory-game'); const grid = document.getElementById('memory-grid'); grid.innerHTML = '';
        let items = []; shuffle(baseVocabulary).slice(0, 6).forEach(v => { items.push({t: v.en, p: v.he}, {t: v.he, p: v.en}); });
        items = shuffle(items);
        items.forEach(item => {
            let card = document.createElement('div'); card.className = 'memory-card'; card.innerText = 'â“';
            card.onclick = () => {
                if(card.classList.contains('flipped') || mem1?.c === card) return;
                card.innerText = item.t; card.classList.add('flipped');
                if(!mem1) mem1 = {c: card, i: item};
                else {
                    if(mem1.i.p === item.t) mem1 = null;
                    else { let c1 = mem1.c; setTimeout(() => { c1.innerText = 'â“'; card.innerText = 'â“'; c1.classList.remove('flipped'); card.classList.remove('flipped'); }, 1000); mem1 = null; }
                }
            };
            grid.appendChild(card);
        });
    }

    document.addEventListener('keypress', (e) => { if (e.key === 'Enter' && !document.getElementById('spelling-game').classList.contains('hidden')) checkSpelling(); });
</script>
</body>
</html>
